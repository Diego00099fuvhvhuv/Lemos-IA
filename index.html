<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Gerador Manual Bac Bo - Diego + IA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* Estilo base */
    body {
      background: #0b0c10;
      color: #eee;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0; padding: 10px;
      overflow-x: hidden;
      user-select: none;
    }
    h1 {
      text-align: center;
      color: #00ff99;
      margin-bottom: 8px;
      text-shadow: 0 0 10px #00ff99;
    }
    .container {
      max-width: 1200px;
      margin: auto;
    }
    .game-area {
      display: flex;
      align-items: flex-start;
      overflow-x: auto;
      padding-bottom: 20px;
      border: 2px solid #00ff99;
      border-radius: 10px;
      background: #121417;
      min-height: 320px;
    }
    .line-numbers {
      display: flex;
      flex-direction: column;
      margin-right: 10px;
      user-select: none;
    }
    .line-numbers div {
      height: 50px;
      line-height: 50px;
      text-align: center;
      color: #444;
      font-weight: bold;
      border-bottom: 1px solid #222;
      font-size: 14px;
    }
    .columns {
      display: flex;
      flex-wrap: nowrap;
    }
    .column {
      display: flex;
      flex-direction: column-reverse;
      margin-right: 6px;
      align-items: center;
      border: 2px solid #222;
      border-radius: 8px;
      background: #1c1f23;
      padding: 4px 2px 6px 2px;
      min-width: 48px;
      user-select: none;
    }
    .column-number {
      color: #00ff99;
      font-size: 12px;
      margin-top: 6px;
      user-select: none;
    }
    .cell {
      width: 48px;
      height: 50px;
      margin-bottom: 6px;
      border-radius: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
    }
    .cell.Player {
      background-color: #0044cc;
      color: #cce5ff;
      box-shadow: 0 0 8px #3388ff88;
    }
    .cell.Banker {
      background-color: #cc0000;
      color: #ffcccc;
      box-shadow: 0 0 8px #ff444488;
    }
    .cell.Tie {
      background-color: #d4af37;
      color: #000;
      box-shadow: 0 0 8px #f3e64dbb;
    }
    .cell.empty {
      background: #222;
      cursor: pointer;
      box-shadow: none;
    }
    .cell:hover {
      filter: brightness(1.2);
    }
    .buttons {
      margin-top: 10px;
      text-align: center;
      user-select: none;
    }
    .buttons button {
      background: #00ff99;
      border: none;
      color: #000;
      font-weight: bold;
      padding: 12px 18px;
      margin: 0 10px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
      user-select: none;
      box-shadow: 0 0 12px #00ff99aa;
    }
    .buttons button:hover {
      background: #00cc77;
    }
    .signals {
      background: #1a1f23;
      padding: 10px;
      border-radius: 8px;
      max-height: 180px;
      overflow-y: auto;
      font-size: 14px;
      margin-top: 15px;
      user-select: none;
    }
    .signal-entry {
      margin-bottom: 8px;
      background: #2c3238;
      padding: 8px;
      border-left: 4px solid #00ff99;
      border-radius: 4px;
    }
    .signal-entry strong {
      color: #00ff99;
    }
    .floating-dollar {
      position: fixed;
      font-size: 24px;
      color: #00ff99aa;
      animation: floatUp 5s linear infinite;
      font-weight: bold;
      pointer-events: none;
      user-select: none;
      z-index: 9999;
    }
    .assertividade {
      margin-top: 12px;
      font-size: 16px;
      color: #88ffdd;
      user-select: none;
      font-weight: bold;
      text-align: center;
    }

    @keyframes floatUp {
      0% {
        transform: translateY(100vh);
        opacity: 1;
      }
      100% {
        transform: translateY(-20vh);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <h1>Gerador Manual Bac Bo - Diego + IA</h1>
  <div class="container">
    <div class="game-area">
      <div class="line-numbers">
        <div>6</div>
        <div>5</div>
        <div>4</div>
        <div>3</div>
        <div>2</div>
        <div>1</div>
      </div>
      <div class="columns" id="columnsContainer"></div>
    </div>

    <div class="buttons" aria-label="Controles de entrada">
      <button id="btnPlayer" aria-label="Inserir Player">Player (Azul)</button>
      <button id="btnBanker" aria-label="Inserir Banker">Banker (Vermelho)</button>
      <button id="btnTie" aria-label="Inserir Tie">Tie (Empate)</button>
      <button id="btnNewColumn" aria-label="Nova Coluna">Nova Coluna</button>
      <button id="btnUndo" aria-label="Desfazer último">Desfazer Último</button>
      <button id="btnClear" aria-label="Limpar tudo">Limpar Tudo</button>
    </div>

    <div class="signals" id="signalsArea">Nenhum sinal detectado ainda.</div>
    <div class="assertividade" id="accuracyArea">Assertividade: 0%</div>
  </div>

  <script>
    // Configurações básicas
    const MAX_LINES = 6;
    const columnsContainer = document.getElementById('columnsContainer');
    const signalsArea = document.getElementById('signalsArea');
    const accuracyArea = document.getElementById('accuracyArea');

    let history = []; // Array de colunas: cada coluna é array de 6 strings ("Player", "Banker", "Tie", ou null)
    let currentColumn = [];

    // Estatísticas para assertividade (simulada)
    let totalSignals = 0;
    let hits = 0;

    // Função para criar uma coluna visual vazia
    function createColumn() {
      const colDiv = document.createElement('div');
      colDiv.classList.add('column');
      for (let i = 0; i < MAX_LINES; i++) {
        const cell = document.createElement('div');
        cell.classList.add('cell', 'empty');
        cell.dataset.line = MAX_LINES - i; // para numerar de 6 a 1 visualmente
        cell.textContent = '';
        colDiv.appendChild(cell);
      }
      const colNum = document.createElement('div');
      colNum.classList.add('column-number');
      colNum.textContent = history.length + 1;
      colDiv.appendChild(colNum);
      columnsContainer.appendChild(colDiv);
      return colDiv;
    }

    // Renderiza todas as colunas baseadas em history
    function renderColumns() {
      columnsContainer.innerHTML = '';
      history.forEach((colData, colIndex) => {
        const colDiv = document.createElement('div');
        colDiv.classList.add('column');
        for (let i = MAX_LINES - 1; i >= 0; i--) {
          const cell = document.createElement('div');
          const val = colData[i] || null;
          cell.classList.add('cell');
          if (val === 'Player') cell.classList.add('Player');
          else if (val === 'Banker') cell.classList.add('Banker');
          else if (val === 'Tie') cell.classList.add('Tie');
          else cell.classList.add('empty');
          cell.textContent = val ? (val === 'Player' ? 'P' : val === 'Banker' ? 'B' : 'T') : '';
          colDiv.appendChild(cell);
        }
        const colNum = document.createElement('div');
        colNum.classList.add('column-number');
        colNum.textContent = colIndex + 1;
        colDiv.appendChild(colNum);
        columnsContainer.appendChild(colDiv);
      });
      // Também render a coluna em construção, se houver
      if (currentColumn.length > 0) {
        const colDiv = document.createElement('div');
        colDiv.classList.add('column');
        for (let i = MAX_LINES - 1; i >= 0; i--) {
          const val = currentColumn[i] || null;
          const cell = document.createElement('div');
          cell.classList.add('cell');
          if (val === 'Player') cell.classList.add('Player');
          else if (val === 'Banker') cell.classList.add('Banker');
          else if (val === 'Tie') cell.classList.add('Tie');
          else cell.classList.add('empty');
          cell.textContent = val ? (val === 'Player' ? 'P' : val === 'Banker' ? 'B' : 'T') : '';
          colDiv.appendChild(cell);
        }
        const colNum = document.createElement('div');
        colNum.classList.add('column-number');
        colNum.textContent = history.length + 1;
        colDiv.appendChild(colNum);
        columnsContainer.appendChild(colDiv);
      }
      columnsContainer.scrollLeft = columnsContainer.scrollWidth; // rolagem infinita automática
    }

    // Função para detectar os sinais conforme suas 2 estratégias
    function detectSignals() {
      let signals = [];
      const h = [...history];
      if (currentColumn.length === MAX_LINES) h.push(currentColumn);

      // Estratégia 1: Linha 5 e 6 da coluna i, linha 1 da coluna i+1
      for (let i = 0; i < h.length - 1; i++) {
        const colA = h[i];
        const colB = h[i + 1];
        if (!colA || !colB) continue;
        const line5 = colA[4];
        const line6 = colA[5];
        if (!line5 || !line6 || !colB[0]) continue;

        // Condição Banker e Player em linha 5 e 6 (em qualquer ordem)
        const cond1 = line5 === 'Banker' && line6 === 'Player' && colB[0] === 'Player';
        const cond2 = line5 === 'Player' && line6 === 'Banker' && colB[0] === 'Banker';
        if (cond1 || cond2) {
          const aposta = colB[0];
          signals.push({
            strategy: 1,
            column: i + 2,
            line: 2,
            bet: aposta,
            protect: 'Tie',
          });
        }
      }

      // Estratégia 2: Padrão V em 3 colunas
      for (let i = 0; i < h.length - 2; i++) {
        const col1 = h[i];
        const col2 = h[i + 1];
        const col3 = h[i + 2];
        if (!col1 || !col2 || !col3) continue;

        const condA = col1[0] === 'Player' && col1[1] === 'Banker' && col2[5] === 'Player' && col3[0] === 'Banker';
        const condB = col1[0] === 'Banker' && col1[1] === 'Player' && col2[5] === 'Banker' && col3[0] === 'Player';

        if (condA) {
          signals.push({
            strategy: 2,
            column: i + 3,
            line: 1,
            bet: 'Banker',
            protect: 'Tie',
          });
        }
        if (condB) {
          signals.push({
            strategy: 2,
            column: i + 3,
            line: 1,
            bet: 'Player',
            protect: 'Tie',
          });
        }
      }

      return signals;
    }

    // Atualiza a área de sinais e histórico
    function updateSignals() {
      const signals = detectSignals();
      if (signals.length === 0) {
        signalsArea.textContent = 'Nenhum sinal detectado ainda.';
        return;
      }

      signalsArea.innerHTML = '';
      totalSignals = signals.length;
      hits = 0;

      signals.forEach((s, i) => {
        // Simulação da assertividade: 80% de acerto aleatório
        if (Math.random() < 0.8) hits++;

        const div = document.createElement('div');
        div.classList.add('signal-entry');
        div.innerHTML = `
          <strong>Estratégia ${s.strategy}:</strong> Coluna ${s.column}, Linha ${s.line} — Apostar <span style="color:${s.bet === 'Player' ? '#3399ff' : '#ff6666'}">${s.bet}</span><br>
          <em>Proteger no TIE (Empate)</em>
        `;
        signalsArea.appendChild(div);
      });

      const accPercent = totalSignals ? ((hits / totalSignals) * 100).toFixed(1) : 0;
      accuracyArea.textContent = `Assertividade: ${accPercent}%`;
    }

    // Adiciona nova jogada à coluna atual
    function addPlay(type) {
      if (currentColumn.length >= MAX_LINES) {
        alert('Coluna já está completa! Clique em "Nova Coluna" para começar outra.');
        return;
      }
      currentColumn.push(type);
      renderColumns();
      updateSignals();
    }

    // Finaliza coluna atual e adiciona ao histórico
    function finishColumn() {
      if (currentColumn.length !== MAX_LINES) {
        alert('Coluna incompleta! Complete as 6 linhas antes de criar nova coluna.');
        return;
      }
      history.push(currentColumn);
      currentColumn = [];
      renderColumns();
      updateSignals();
    }

    // Desfazer último registro (na coluna atual)
    function undoLast() {
      if (currentColumn.length === 0) {
        alert('Nada para desfazer na coluna atual.');
        return;
      }
      currentColumn.pop();
      renderColumns();
      updateSignals();
    }

    // Limpar tudo
    function clearAll() {
      if (!confirm('Deseja limpar todas as colunas e sinais?')) return;
      history = [];
      currentColumn = [];
      renderColumns();
      updateSignals();
    }

    // Animação de dólares flutuando
    function createFloatingDollar() {
      const dollar = document.createElement('div');
      dollar.classList.add('floating-dollar');
      dollar.style.left = `${Math.random() * 100}vw`;
      dollar.style.fontSize = `${16 + Math.random() * 24}px`;
      dollar.style.animationDuration = `${4 + Math.random() * 3}s`;
      dollar.textContent = '💵';
      document.body.appendChild(dollar);
      setTimeout(() => dollar.remove(), 7000);
    }
    // Criar vários dólares flutuando aleatoriamente
    setInterval(createFloatingDollar, 800);

    // Botões eventos
    document.getElementById('btnPlayer').addEventListener('click', () => addPlay('Player'));
    document.getElementById('btnBanker').addEventListener('click', () => addPlay('Banker'));
    document.getElementById('btnTie').addEventListener('click', () => addPlay('Tie'));
    document.getElementById('btnNewColumn').addEventListener('click', finishColumn);
    document.getElementById('btnUndo').addEventListener('click', undoLast);
    document.getElementById('btnClear').addEventListener('click', clearAll);

    // Inicializar primeira coluna vazia
    renderColumns();
  </script>
</body>
</html>
